<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <!-- Import js here -->
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdn.rawgit.com/novus/nvd3/v1.8.1/build/nv.d3.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
  <link rel="stylesheet" href="https://cdn.rawgit.com/novus/nvd3/v1.8.1/build/nv.d3.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  
  <!-- Style here -->
  <link rel="stylesheet" href="index.css">
  <style>

  .county{
      fill: #AAFFFF;
  }

  .county-boundary {
    fill: none;
    stroke: #fff;
    stroke-linejoin: round;
  }

  .states {
    fill: none;
    stroke: #000;
    stroke-linejoin: round;
  }

  .q0-9 { fill:rgb(247,251,255); }
  .q1-9 { fill:rgb(222,235,247); }
  .q2-9 { fill:rgb(198,219,239); }
  .q3-9 { fill:rgb(158,202,225); }
  .q4-9 { fill:rgb(107,174,214); }
  .q5-9 { fill:rgb(66,146,198); }
  .q6-9 { fill:rgb(33,113,181); }
  .q7-9 { fill:rgb(8,81,156); }
  .q8-9 { fill:rgb(8,48,107); }
  
  
  .tooltip{ background-color:rgba(68,136,187,0.5);;
          margin: 10px;
          height: 50px;
          width: 150px;
          padding-left: 10px; 
          padding-top: 10px;
    -webkit-border-radius:10px;
    -moz-border-radius:10px;
    border-radius:10px;
        }

  </style>
</head>

<!-- Main code/website goes here -->
<body>
  <!-- Make sure to seperate necessary code and imports for easier readability -->
  <!-- Seperating by div's to clean up code further -->
  <div id='header'>
    <div align='center' id='title'>
      <h1 class='Arial'> 2014 Reported Escherichia coli O157 </h1>
    </div>
  </div>

  <div id='filterPanel'>
    <p> Select Strain Type </p>
    <div id='straintype'>
      <select id="strains" onchange="selected(this.selectedIndex)"></select>
        <script src="js/jquery.csv-0.71.min.js"></script>
        <script>
            var rawObjects = null;
            var rawStrains = [];

            function contains(array, item) {
                for (var i = 0; i < array.length; i++) {
                    if (array[i] === item) {
                        return true;
                    }
                }
                return false
            }

            function renderCSVDropdown(csv) {
                    var dropdown = $('select#strains');
                    for(var i = 0; i < csv.length; i++) {
                        var record = csv[i];
                        // console.log("record: " + record["PFGE-XbaI-pattern"])
                        if (!contains(rawStrains, record["PFGE-XbaI-pattern"])) {
                            rawStrains.push(record["PFGE-XbaI-pattern"]);
                            var entry = $('<option>').attr('value', record["PFGE-XbaI-pattern"]).html(record["PFGE-XbaI-pattern"]);
                            dropdown.append(entry);
                        }
                    }

                    // starts the dropdown as blank
                    $('#strains').prop("selectedIndex", -1);
                    // console.log(rawStrains);
            };

            function popDropdown() {
                var csv_path = "EC_data2014_v2.csv";
                $.get(csv_path, function(data) {
                    rawObjects = $.csv.toObjects(data);
                    renderCSVDropdown(rawObjects);
                })};

            popDropdown();

            function selected(index) {
                console.log("selected " + rawObjects[index]["PFGE-XbaI-pattern"]);
            }
        </script>
    </div>

    <p> Select Region Type </p>
    <div id='countystate'>
      <select>
        <option value="county">County</option>
        <option value="state">State</option>
      </select>
    </div>
  </div>

  <div id="detailsPanel">
    <p align="center"> Total Count </p>
    <div id='totalCount'>

    </div>
    <p align="center"> Selected Date Range </p>
    <div id="dateRange">

    </div>
    <p align="center"> Recorded Outbreaks </p>
    <div id="outbreaks">

    </div>
  </div>

  <div id='map'>
    <div id='choropleth'>
          <script type="text/javascript" src="./mapTooltip.js">
          </script>
    		<script type="text/javascript" src="./renderMap.js">
    		</script>
    </div>
    <div id ='legend'>

    </div>
  </div>

  <div id='histogram'>
    <svg></svg>
  </div>


</body>
